<html>
    <head>

        <!-- Creating Title -->
        <title>jQuery Code Player</title>

        <!-- Activation jQuery and jQueryUI-->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
        <script src="jquery-ui/external/jquery/jquery.js"></script>
        <script src="jquery-ui/jquery-ui.min.js"></script>
        <script src="https://code.jquery.com/jquery-3.6.0.js"></script>
        <script src="https://code.jquery.com/ui/1.13.1/jquery-ui.js"></script>
        <link rel="stylesheet" href="//code.jquery.com/ui/1.13.1/themes/base/jquery-ui.css"></link>
        <!-- end of linked content-->

        <style type="text/css">

            #mainHeader {
                width:100%;
                margin:auto;
                height:5%;
                background-color: grey;
            }
            #centerInHeader {
                margin-left: auto;
                margin-right:11%;
                padding-top: 6px;
                text-align: center;
                font-family: Arial;
                float:inline-start;
            }
            #siteName {
                float:left;
                margin-left: 1%;
                margin-top: 5px;
                font-family: Arial;
                font-weight:lighter;
                color: black;
                font-size: 170%;
            }

            #htmlContainer {
                margin: auto;
                margin-top:2px;
                padding:2px;
                width: 33.1%;
                height:93%;
                border: solid 2px;
                border-color:grey;
                float:left;
                resize: none;
            }

            #cssContainer {
                margin: auto;
                margin-top:2px;
                padding:2px;
                width: 32.8%;
                height:93%;
                border: solid 2px;
                border-color:grey;
                float:left;
                resize: none;
            }

            #jsContainer {
                margin: auto;
                margin-top:2px;
                padding:2px;
                padding-left: 0%;
                width: 34.1%;
                height:93%;
                border: solid 2px;
                border-color:grey;
                float:left;
                resize: none;
            }

            #outputContainer {
                margin: auto;
                margin-top:2px;
                padding:2px;
                height:50%;
                width: 99.6%;
                border: solid 2px;
                border-color:grey;
            }

        </style>

    </head>

    <body>

        <div id="mainHeader">
            <div id ="SiteName">Guy's Code Player</div>
            <div id="centerInHeader">
                <button class="ui-button ui-widget" id="htmlButton">HTML</button>
                <button class="ui-button ui-widget" id="cssButton">CSS</button>
                <button class="ui-button ui-widget" id="jsButton">JavaScript</button>
                <button class="ui-button ui-widget" id="outputButton">Output</button>
            </div>
        </div>

        <div id="container">
            <textarea id="htmlContainer" class="panel"><p id="outputP">HTML</p></textarea>
            <textarea id="cssContainer" class="panel">p {font-size:500%}</textarea>
            <textarea id="jsContainer" class="panel">document.getElementById("outputP").innerHTML = "its different then p to show you the js is working";
            </textarea>
        </div>

        <div id="container">
            <iframe id="outputContainer"></iframe>
        </div>

        <script text="text/javascript">
            //alerting if jQuery isnt working as intended
            if (typeof jQuery == "undefined") {
                alert('jQuery not working as intended. You may face problems');
            }

            //toggle buttons
            $("#htmlButton").click( function() {
                $("#htmlContainer").toggle();
            });
            $("#cssButton").click( function() {
                $("#cssContainer").toggle();
            });
            $("#jsButton").click( function() {
                $("#jsContainer").toggle();
            });
            $("#outputButton").click( function() {
                $("#outputContainer").toggle();
            });

            //set iframe sizes
            $(".panel").width(($(window).width() / 3) - 13)

            //function to connect textareas to output iframe
            function updateOutput() {
                $("#outputContainer").contents().find("html").html(
                "<html><head><style type='text/css'>" + $("#cssContainer").val() + "</style></head><body>" + $("#htmlContainer").val());
            }
            updateOutput();
            document.getElementById("outputContainer").contentWindow.eval($("#jsContainer").val());

            //make HTML and CSS textareas binded to output iFrame
            $("textarea").on('change keyup paste', function () {
                updateOutput();
                //THIS IS A VERY DANGEROUS FUNCTION TO RUN, DO NOT USE IT ON LIVE WEBSITES!!!
                document.getElementById("outputContainer").contentWindow.eval($("#jsContainer").val());
                //THIS IS A VERY DANGEROUS FUNCTION TO RUN, DO NOT USE IT ON LIVE WEBSITES!!!
            })
        </script>

    </body>
</html>
